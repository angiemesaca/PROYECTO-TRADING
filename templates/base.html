<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Wallet Trainer{% endblock %}</title>
    
    <!-- ¡ESTA LÍNEA ES LA MÁGICA! Arregla la "disposición" y la "letra" -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tu CSS personalizado (si tenías uno) -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    
    <!-- Chart.js (movido aquí para que esté disponible en todas las páginas si se necesita) -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        /* Pequeño fix para que el fondo sea siempre oscuro */
        body { background-color: #111827; } /* bg-gray-900 */
    </style>
</head>
<body class="bg-gray-900 text-gray-100 font-sans">

    <!-- Barra de Navegación Superior -->
    <nav class="bg-gray-800 border-b border-gray-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <!-- Logo -->
                <div class="flex-shrink-0 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="text-blue-500 bi bi-wallet2" viewBox="0 0 16 16">
                        <path d="M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v1.384l-1.217 1.217a.5.5 0 0 1-.707 0L14 7.025V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V3h1.086a1.5 1.5 0 0 1 1.04.43l.8 1.12a.5.5 0 0 0 .868-.517V1.78a1.5 1.5 0 0 1 1.432-1.454h2.908zM1 4.5A1.5 1.5 0 0 1 2.5 3H3v10.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V3h.5A.5.5 0 0 0 14 2.5v-1a.5.5 0 0 0-.5-.5h-2.908a.5.5 0 0 0-.477.326L8.83 3.418a.5.5 0 0 1-.868-.517V1.253a.5.5 0 0 0-.477-.326H5.25a.5.5 0 0 0-.477.326L3.99 2.528a.5.5 0 0 1-.868-.517V1.5A.5.5 0 0 0 2.5 1H1v3.5z"/>
                        <path d="M1 4.5A1.5 1.5 0 0 1 2.5 3H3v10.5a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V3h.5A.5.5 0 0 0 14 2.5v-1a.5.5 0 0 0-.5-.5h-2.908a.5.5 0 0 0-.477.326L8.83 3.418a.5.5 0 0 1-.868-.517V1.253a.5.5 0 0 0-.477-.326H5.25a.5.5 0 0 0-.477.326L3.99 2.528a.5.5 0 0 1-.868-.517V1.5A.5.5 0 0 0 2.5 1H1v3.5z"/>
                    </svg>
                    <span class="font-bold text-xl ml-2 text-white">Wallet Trainer</span>
                </div>
                
                <!-- Enlaces de Navegación -->
                <div class="hidden sm:ml-6 sm:flex sm:space-x-4">
                    <!-- Usamos request.endpoint para saber qué página está activa -->
                    <a href="{{ url_for('dashboard') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium 
                              {% if request.endpoint == 'dashboard' %} 
                                  bg-gray-900 text-white 
                              {% else %} 
                                  text-gray-300 hover:bg-gray-700 hover:text-white 
                              {% endif %}">
                        Inicio
                    </a>
                    <a href="{{ url_for('performance') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium 
                              {% if request.endpoint == 'performance' %} 
                                  bg-gray-900 text-white 
                              {% else %} 
                                  text-gray-300 hover:bg-gray-700 hover:text-white 
                              {% endif %}">
                        Rendimientos
                    </a>
                    <a href="{{ url_for('sugerencias') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium 
                              {% if request.endpoint == 'sugerencias' %} 
                                  bg-gray-900 text-white 
                              {% else %} 
                                  text-gray-300 hover:bg-gray-700 hover:text-white 
                              {% endif %}">
                        Sugerencias IA
                    </a>
                    <a href="{{ url_for('bot_settings') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium 
                              {% if request.endpoint == 'bot_settings' %} 
                                  bg-gray-900 text-white 
                              {% else %} 
                                  text-gray-300 hover:bg-gray-700 hover:text-white 
                              {% endif %}">
                        Ajustes
                    </a>
                </div>
                
                <!-- Perfil y Salir -->
                <div class="hidden sm:ml-6 sm:flex sm:items-center">
                    <a href="{{ url_for('profile') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium
                              {% if request.endpoint == 'profile' %} 
                                  bg-gray-900 text-white 
                              {% else %} 
                                  text-gray-300 hover:bg-gray-700 hover:text-white 
                              {% endif %}">
                        Mi Cuenta
                    </a>
                    <a href="{{ url_for('logout') }}" class="ml-4 px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:bg-gray-700 hover:text-white">
                        Salir
                    </a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Contenido Principal de la Página -->
    <main>
        <!-- Alertas Flash (Mensajes de éxito/error) -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="container mx-auto px-4 py-4">
                {% for category, message in messages %}
                    <div class{% if category == 'success' %}"bg-green-800 border-l-4 border-green-400 text-green-100 p-4"{% elif category == 'danger' %}"bg-red-800 border-l-4 border-red-400 text-red-100 p-4"{% else %}"bg-blue-800 border-l-4 border-blue-400 text-blue-100 p-4"{% endif %} role="alert">
                        <p>{{ message }}</p>
                    </div>
                {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <!-- Aquí es donde las otras páginas (dashboard, performance, etc.) inyectarán su contenido -->
        {% block content %}
        {% endblock %}
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700 mt-12">
        <div class="container mx-auto px-8 py-4 text-center text-gray-400 text-sm">
            &copy; 2025 Wallet Trainer. Todos los derechos reservados.
        </div>
    </footer>

    <!-- Scripts de Bloque (para que otras páginas añadan su JS) -->
    {% block scripts %}
    {% endblock %}
</body>
</html>