<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Wallet Trainer{% endblock %}</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Tu CSS personalizado -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <script>
        // Configuración de Tailwind en modo oscuro
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        gray: {
                            900: '#111827',
                            800: '#1F2937',
                            700: '#374151',
                            // ... más colores
                        }
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-gray-900 text-gray-200">
    
    <!-- Barra de Navegación -->
    <nav class="bg-gray-800 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                
                <!-- Logo -->
                <a href="{{ url_for('dashboard') }}" class="flex items-center space-x-2">
                    <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" class="text-blue-500 bi bi-wallet2" viewBox="0 0 16 16">
                        <path d="M12.136.326A1.5 1.5 0 0 1 14 1.78V3h.5A1.5 1.5 0 0 1 16 4.5v9a1.5 1.5 0 0 1-1.5 1.5h-13A1.5 1.5 0 0 1 0 13.5v-9A1.5 1.5 0 0 1 1.5 3H2V1.78a1.5 1.5 0 0 1 1.864-1.454l1.723.431A1.5 1.5 0 0 1 7 1.78v1.085l1.01.253a1.5 1.5 0 0 1 1.185 0l1.01-.253V1.78a1.5 1.5 0 0 1 1.14-.99l1.723-.431Z"/>
                        <path d="M15.5 4H.5a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5ZM1 4.5v9h14v-9H1Z"/>
                    </svg>
                    <span class="text-xl font-bold text-white">Wallet Trainer</span>
                </a>
                
                <!-- Enlaces de Navegación -->
                <div class="hidden md:flex items-center space-x-6">
                    <!-- 
                        LÓGICA CORREGIDA:
                        Usamos request.endpoint para saber qué ruta está activa.
                        request.endpoint es el nombre de la función en app.py (ej: 'dashboard', 'performance')
                    -->
                    {% set active_page = request.endpoint %}
                    
                    <a href="{{ url_for('dashboard') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium
                       {% if active_page == 'dashboard' %} 
                           bg-gray-900 text-white 
                       {% else %} 
                           text-gray-300 hover:bg-gray-700 hover:text-white 
                       {% endif %}">
                       Inicio
                    </a>
                    <a href="{{ url_for('bot_settings') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium
                       {% if active_page == 'bot_settings' %} 
                           bg-gray-900 text-white 
                       {% else %} 
                           text-gray-300 hover:bg-gray-700 hover:text-white 
                       {% endif %}">
                       Ajustes Bot
                    </a>
                    <a href="{{ url_for('performance') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium
                       {% if active_page == 'performance' %} 
                           bg-gray-900 text-white 
                       {% else %} 
                           text-gray-300 hover:bg-gray-700 hover:text-white 
                       {% endif %}">
                       Rendimiento
                    </a>
                    <a href="{{ url_for('sugerencias') }}" 
                       class="px-3 py-2 rounded-md text-sm font-medium
                       {% if active_page == 'sugerencias' %} 
                           bg-gray-900 text-white 
                       {% else %} 
                           text-gray-300 hover:bg-gray-700 hover:text-white 
                       {% endif %}">
                       Sugerencias IA
                    </a>
                </div>
                
                <!-- Perfil y Logout -->
                <div class="hidden md:flex items-center space-x-4">
                    <a href="{{ url_for('profile') }}" 
                       class="text-gray-300 hover:text-white
                       {% if active_page == 'profile' %} text-blue-400 {% endif %}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                        </svg>
                    </a>
                    <a href="{{ url_for('logout') }}" class="text-gray-300 hover:text-white">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-box-arrow-right" viewBox="0 0 16 16">
                            <path fill-rule="evenodd" d="M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"/>
                            <path fill-rule="evenodd" d="M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"/>
                        </svg>
                    </a>
                </div>
                
                <!-- Menú Móvil (Opcional, no implementado) -->
                <div class="md:hidden flex items-center">
                    <!-- Botón de hamburguesa -->
                </div>

            </div>
        </div>
    </nav>
    
    <!-- Contenido Principal -->
    <main>
        <!-- Alertas Flash -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
            <div class="fixed top-20 right-5 z-50">
                {% for category, message in messages %}
                <div class="max-w-sm mx-auto mb-3 px-4 py-3 rounded-md shadow-lg 
                            {% if category == 'success' %} bg-green-600 border border-green-700
                            {% elif category == 'danger' %} bg-red-600 border border-red-700
                            {% else %} bg-blue-600 border border-blue-700 {% endif %}" 
                     role="alert">
                    <span class="block sm:inline text-white">{{ message }}</span>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        {% endwith %}

        {% block content %}{% endblock %}
    </main>
    
    <!-- Footer -->
    <footer class="bg-gray-800 text-center py-6 mt-12 border-t border-gray-700">
        <p class="text-gray-500">&copy; 2025 Wallet Trainer. Todos los derechos reservados.</p>
    </footer>

</body>
</html>